(this["webpackJsonparc-x-pmndrs-colors"]=this["webpackJsonparc-x-pmndrs-colors"]||[]).push([[0],{63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var o=a(4),r=a(1),n=a(28),c=a.n(n),s=a(5),i=a(6),l=a(9),j=a(12),h=a(50),p=a(65),b=a(66),O=a(68),d=a(46),u=a(51),x=a(33),g=a(32),m=a(48),y=a(37),f=a.n(y);const w=900,I=450+(Math.random()>.5?-1:1)*Math.round(200*Math.random()),M=new URLSearchParams(window.location.search),P=M.get("c"),S=M.get("p")||I,v=P?atob(P).split(""):[...new Array(36)].map((e=>Math.round(4*Math.random()))),k=S<=w?parseInt(S,10):I,R=Object(x.a)((C=(e,t)=>({wheelIndex:k,wheelOpen:!1,palette:g[k],colors:v,setIndex:(a,o)=>e({colors:Object(m.a)(t().colors,(e=>{e[a]=o}))}),setPalette:t=>e({palette:t}),setWheelIndex:t=>e({wheelIndex:t}),increaseWheelIndex:f()((()=>e((e=>({wheelIndex:e.wheelIndex+1})))),5),decreaseWheelIndex:f()((()=>e((e=>({wheelIndex:e.wheelIndex-1})))),5),toggleWheel:()=>e((e=>({wheelOpen:!e.wheelOpen})))}),(e,t,a)=>C((a=>{e(a);const o=t(),r=o.wheelOpen,n=o.colors,c=o.wheelIndex,s=new URLSearchParams({c:btoa(n.join("")),p:c});r||window.history.replaceState("","","?".concat(s.toString()))}),t,a)));var C,W=a(10),A=a(67),L=a(49),B=a.n(L);function D(e){let t=e.wheelIndex,a=e.opacity,n=Object(W.a)(e,["wheelIndex","opacity"]);const c=Object(r.useRef)(),h=Object(r.useState)(!1),p=Object(i.a)(h,2),b=p[0],O=p[1],d=Object(A.a)("/Screen.gltf").nodes,u=1===a?1.4:1,x=R((e=>e.setWheelIndex)),m=R((e=>e.toggleWheel)),y=R((e=>e.wheelOpen)),f=R((e=>e.setPalette)),w=Object(r.useState)(y),I=Object(i.a)(w,2),M=I[0],P=I[1],S=g[t],v=Object(r.useRef)(),k=Object(j.useSpring)({ref:v,springOpacity:1===a?1:0}).springOpacity;Object(r.useEffect)((()=>{y?M?v.current.start({springOpacity:a}):v.current.start({springOpacity:a,delay:1e3,onRest:()=>P(!0)}):v.current.start({springOpacity:1===a?1:0,onRest:()=>P(!1)}),1===a&&f(S)}),[M,P,y,a,f,S]),Object(r.useEffect)((()=>document.body.style.cursor=b?"pointer":"auto"),[b]),Object(l.f)((()=>{const e=B()(c.current.scale.x,u,.1);c.current.scale.set(e,e,e)}));const C=Object(r.useCallback)((e=>{e.stopPropagation(),t&&(y?(x(t),m()):1===a&&m())}),[x,y,a,t,m]);return Object(o.jsxs)("group",Object(s.a)(Object(s.a)({visible:a>.01,onClick:C,ref:c,scale:[u,u,u]},n),{},{children:[Object(o.jsxs)("group",{position:[1,-.51,1],scale:[1.27,1.27,1.27],dispose:null,rotation:[0,Math.PI/2,0],children:[Object(o.jsx)("mesh",{geometry:d.Slice001.geometry,position:[.97,.39,-.91],renderOrder:0,scale:[15,1,1],children:Object(o.jsx)(j.a.meshPhysicalMaterial,{color:"black",metalness:1,clearcoat:1,roughness:1,transparent:!0,opacity:k})}),Object(o.jsx)(j.a.mesh,{onPointerOver:e=>(e.stopPropagation(),void O(!0)),onPointerOut:()=>O(!1),castShadow:!0,geometry:d.Slice.geometry,renderOrder:1,children:Object(o.jsx)(j.a.meshPhysicalMaterial,{transmission:1,metalness:0,clearcoat:1,roughness:0,transparent:!0,color:"#222",opacity:k})})]}),S?S.map(((e,t)=>Object(o.jsxs)("mesh",{"position-x":(t-2.5)/3.8,"position-z":-.24,renderOrder:0,children:[Object(o.jsx)("boxBufferGeometry",{args:[.265,.8,.02]}),Object(o.jsx)(j.a.meshStandardMaterial,{color:e,transparent:!0,opacity:k,metalness:.7,roughness:.6})]},"0".concat(t)))):null]}))}A.a.preload("/Screen.gltf");var E=a(2);function X(e){let t=e.i,a=e.material,n=e.metalness,c=e.roughness,j=Object(W.a)(e,["i","material","metalness","roughness"]);const h=Object(r.useRef)(),p=Object(r.useState)(!1),b=Object(i.a)(p,2),O=b[0],d=b[1],u=R((e=>e.colors[t])),x=R((e=>e.setIndex)),g=Object(r.useCallback)((e=>{e.stopPropagation(),x(t,(u+1)%5)}),[u,t,x]),m=R((e=>e.palette)),y=Object(r.useState)((()=>new E.Color)),f=Object(i.a)(y,1)[0];return Object(r.useEffect)((()=>document.body.style.cursor=O?"pointer":"auto"),[O]),Object(l.f)((()=>a.color.lerp(f.set(m[u]).convertSRGBToLinear(),.1))),Object(o.jsx)("mesh",Object(s.a)(Object(s.a)({onPointerOver:e=>(e.stopPropagation(),void d(!0)),onPointerOut:()=>d(!1),ref:h,onClick:g},j),{},{children:Object(o.jsx)("primitive",{object:a,attach:"material",metalness:n,roughness:c})}))}function z(e){const t=Object(A.a)("/colors.glb"),a=t.nodes,r=t.materials,n=Object(A.a)("/Screen.gltf").nodes;return Object(o.jsxs)("group",Object(s.a)(Object(s.a)({},e),{},{dispose:null,children:[Object(o.jsx)("group",{position:[-.54,1.08,1.69],children:new Array(36).fill().map(((e,t)=>Object(o.jsx)(X,{i:t,"rotation-x":Math.PI/2,"rotation-y":-Math.PI/2,geometry:a["Cylinder".concat(0===t?"":t<10?"00".concat(t):"0".concat(t))].geometry,material:r["Material.".concat(0===t?"037":t+1<10?"00".concat(t+1):"0".concat(t+1))],metalness:.85,roughness:.5},"0".concat(t))))}),Object(o.jsx)(D,{}),Object(o.jsx)("mesh",{receiveShadow:!0,geometry:a.Cube.geometry,position:[0,1,0],"rotation-x":Math.PI/2,children:Object(o.jsx)("primitive",{object:r.black,attach:"material",metalness:.55,roughness:.45,color:"#c9ced5"})}),Object(o.jsx)("mesh",{geometry:n.Slice.geometry,position:[1.79,1.789,.01],rotation:[0,0,3.14],scale:[.999,.999,.999],children:Object(o.jsx)("meshPhysicalMaterial",{color:"#111",roughness:1,side:E.BackSide})})]}))}function T(){const e=Object(r.useRef)(),t=Object(r.useRef)(),a=R((e=>e.wheelOpen)),n=R((e=>e.wheelIndex)),c=2*Math.PI*n/8,s=Object(r.useMemo)((()=>{const e=n-4;let t=new Array(8).fill().map(((t,a)=>Math.abs((e+a>0?e+a:w+e+a)%w))),a=new Array(8).fill().map(((e,t)=>{return 0===(a=1-2*Math.abs(t-4)/8)?0:1===a?1:a<.5?Math.pow(2,20*a-10)/2:(2-Math.pow(2,-20*a+10))/2;var a}));for(let o=0;o<Math.abs(n%8);o+=1){const e=a.pop(),o=t.pop();t=[o,...t],a=[e,...a]}return[new Array(8).fill().map(((e,t)=>[0,-2*Math.sin(2*Math.PI*t/8),-2*Math.cos(2*Math.PI*t/8)])),t,a]}),[n]),l=Object(i.a)(s,3),h=l[0],p=l[1],b=l[2],O=Object(j.useSpring)({ref:e,rotY:a?Math.PI/4:Math.PI/2}).rotY,d=Object(j.useSpring)({ref:t,posX:a?2:-3,posZ:a?-4:-1.9}),u=d.posX,x=d.posZ,g=Object(j.useSpring)({rotX:c}).rotX;return Object(j.useChain)(a?[t,e]:[e,t],[0,1]),Object(o.jsx)(j.a.group,{"position-x":u,"position-z":x,"rotation-y":O,children:Object(o.jsx)(j.a.group,{"rotation-x":g,children:h.map(((e,t)=>Object(o.jsx)(D,{position:e,wheelIndex:p[t],"rotation-x":-2*Math.PI*t/8,opacity:b[t]},"0".concat(t))))})})}function G(){const e=Object(p.a)(["/roughness_floor.jpeg","/normal_floor.jpeg"]),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(o.jsx)(b.a,{receiveShadow:!0,resolution:512,args:[30,30],mirror:.5,mixBlur:8,mixStrength:5,rotation:[-Math.PI/2,0,0],position:[3,-2.53,-1],blur:[1e3,100],minDepthThreshold:.5,maxDepthThreshold:2,depthScale:2,children:(e,t)=>Object(o.jsx)(e,Object(s.a)({color:"#333",metalness:0,roughnessMap:a,normalMap:r,normalScale:[.1,.1],envMapIntensity:0},t))})}function J(){const e=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),t=Object(r.useRef)(0),a=R((e=>e.wheelOpen)),n=R((e=>e.increaseWheelIndex)),c=R((e=>e.decreaseWheelIndex)),j=Object(d.a)(window.location.href,{successDuration:2e3}),p=Object(i.a)(j,2),b=p[0],x=p[1],g=Object(r.useCallback)((e=>{e.stopPropagation(),x()}),[x]),m=Object(h.a)(Object(s.a)({onWheel:({xy:[,e]})=>{const a=parseInt(e/50,10);a>t.current&&(c(),t.current=a),a<t.current&&(n(),t.current=a)}},e&&{onDrag:({xy:[,e]})=>{const a=parseInt(e/50,10);a>t.current&&(n(),t.current=a),a<t.current&&(c(),t.current=a)}}),{axis:"y",dragDelay:2e3});return Object(o.jsxs)("div",Object(s.a)(Object(s.a)({},a&&m()),{},{style:{height:"100%"},children:[Object(o.jsxs)(l.a,{concurrent:!0,shadowMap:!0,pixelRatio:[1,1.5],camera:{fov:20,far:100,position:[0,-10,50],zoom:e?1:1.5},children:[Object(o.jsx)("color",{attach:"background",args:["#101010"]}),Object(o.jsx)("fog",{attach:"fog",args:["#101010",50,60]}),Object(o.jsx)("group",{rotation:[Math.PI/8,-Math.PI/3.2,0],"position-x":0,children:Object(o.jsxs)(r.Suspense,{fallback:null,children:[Object(o.jsx)(T,{}),Object(o.jsx)(z,{position:[-2.5,-2.5,0],scale:[1.8,1.8,1.8]}),Object(o.jsx)(G,{})]})}),Object(o.jsx)("ambientLight",{intensity:4}),Object(o.jsx)("spotLight",{castShadow:!0,intensity:2,position:[10,0,10],penumbra:1,angle:.3,distance:30}),Object(o.jsx)("directionalLight",{position:[-5,10,-10],intensity:0})]}),Object(o.jsx)(O.a,{}),Object(o.jsx)(u.a,{date:"1. February",year:"2021",link1:Object(o.jsx)("a",{onClick:g,children:"Share your composition"}),link2:b&&Object(o.jsx)("div",{children:"Link copied in clipboard!"})})]}))}A.a.preload("/Color.gltf");a(63);c.a.render(Object(o.jsx)(J,{}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.3b374e24.chunk.js.map